<?xml version="1.0" encoding="UTF-8"?>
<FindBugsFilter>
    <!-- Exclude test classes from certain checks -->
    <Match>
        <Class name="~.*Test.*" />
        <Bug pattern="DM_EXIT" />
    </Match>
    
    <!-- Exclude test classes from field initialization checks (false positives with JUnit) -->
    <Match>
        <Class name="~.*Test.*" />
        <Bug pattern="UWF_FIELD_NOT_INITIALIZED_IN_CONSTRUCTOR" />
    </Match>
    
    <!-- Exclude generated classes -->
    <Match>
        <Class name="~.*\..*_.+" />
    </Match>
    
    <!-- Exclude specific patterns that are common in this project -->
    <Match>
        <Bug pattern="SE_BAD_FIELD" />
        <Class name="~.*\.exception\..*" />
    </Match>
    
    <!-- Exclude serialization warnings for non-serializable classes -->
    <Match>
        <Bug pattern="SE_TRANSIENT_FIELD_NOT_RESTORED" />
        <Class name="~.*\.config\..*" />
    </Match>
    
    <!-- Exclude thread safety warnings for ConcurrentHashMap operations in network classes -->
    <Match>
        <Bug pattern="AT_UNSAFE_RESOURCE_ACCESS_IN_THREAD" />
        <Class name="com.justsyncit.network.client.TcpClient" />
    </Match>
    
    <Match>
        <Bug pattern="AT_UNSAFE_RESOURCE_ACCESS_IN_THREAD" />
        <Class name="com.justsyncit.network.server.TcpServer" />
    </Match>
    
    <!-- Exclude SQL non-constant string warnings for SqliteSchemaMigrator -->
    <Match>
        <Bug pattern="SQL_NONCONSTANT_STRING_PASSED_TO_EXECUTE" />
        <Class name="com.justsyncit.storage.metadata.SqliteSchemaMigrator" />
    </Match>
    
    <!-- Exclude JMH benchmark warnings -->
    <Match>
        <Class name="com.justsyncit.storage.metadata.MetadataServicePerformanceBenchmark" />
        <Bug pattern="THROWS_METHOD_THROWS_CLAUSE_BASIC_EXCEPTION" />
    </Match>
    <Match>
        <Class name="com.justsyncit.storage.metadata.MetadataServicePerformanceBenchmark" />
        <Bug pattern="DE_MIGHT_IGNORE" />
    </Match>
    <Match>
        <Class name="com.justsyncit.storage.metadata.MetadataServicePerformanceBenchmark" />
        <Bug pattern="REC_CATCH_EXCEPTION" />
    </Match>
    <Match>
        <Class name="com.justsyncit.storage.metadata.MetadataServicePerformanceBenchmark" />
        <Bug pattern="ICAST_INTEGER_MULTIPLY_CAST_TO_LONG" />
    </Match>
    <!-- Expose Rep warnings are acceptable for Dependency Injection in commands and services -->
    <Match>
        <Or>
            <Package name="com.justsyncit.command" />
            <Package name="com.justsyncit.scanner" />
            <Package name="com.justsyncit.backup" />
            <Package name="com.justsyncit.restore" />
            <Package name="com.justsyncit.hash" />
        </Or>
        <Or>
            <Bug pattern="EI_EXPOSE_REP" />
            <Bug pattern="EI_EXPOSE_REP2" />
        </Or>
    </Match>

    <!-- Constructor throws warnings are acceptable for Builders and Argument Validation -->
    <Match>
         <Or>
            <Package name="com.justsyncit.command" />
            <Package name="com.justsyncit.hash" />
            <Package name="com.justsyncit.scanner" />
            <Package name="com.justsyncit.restore" />
         </Or>
         <Bug pattern="CT_CONSTRUCTOR_THROW" />
    </Match>
    
    <!-- REC_CATCH_EXCEPTION is handled by logging -->
    <Match>
         <Or>
            <Package name="com.justsyncit.scanner" />
            <Package name="com.justsyncit.backup" />
            <Package name="com.justsyncit.restore" />
         </Or>
         <Bug pattern="REC_CATCH_EXCEPTION" />
    </Match>
</FindBugsFilter>