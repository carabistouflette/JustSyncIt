# JustSyncIt Client Configuration
# This file contains configuration options for JustSyncIt client operations

# General client settings
client:
  # Default server connection settings
  default_server:
    host: "localhost"
    port: 8080
    username: "user"
    password: "password"
    transport: "tcp"  # Options: tcp, quic
    ssl_enabled: false
    ssl_verify: true
    
  # Default backup settings
  backup:
    # Chunk size in bytes (default: 1MB)
    chunk_size: 1048576
    
    # Compression settings
    compression:
      enabled: true
      level: 6  # 1-9, where 9 is maximum compression
      threshold: 1024  # Only compress files larger than this size
    
    # Deduplication settings
    deduplication:
      enabled: true
      algorithm: "blake3"  # Options: blake3, sha256
    
    # Integrity verification
    verify_integrity: true
    
    # File handling options
    include_hidden: false
    follow_symlinks: false
    symlink_strategy: "skip"  # Options: skip, follow, copy
    
    # Exclusion patterns
    exclude_patterns:
      - "*.tmp"
      - "*.log"
      - "*.cache"
      - ".DS_Store"
      - "Thumbs.db"
      - "node_modules"
      - ".git"
    
    # Inclusion patterns (overrides excludes)
    include_patterns: []
    
    # Metadata
    default_retention_days: 30
    add_metadata: true
    metadata:
      hostname: true
      username: true
      timestamp: true
      tags: []

  # Default restore settings
  restore:
    # Overwrite existing files
    overwrite: false
    
    # Preserve permissions
    preserve_permissions: true
    
    # Preserve timestamps
    preserve_timestamps: true
    
    # Verify restored files
    verify_restored: true
    
    # Dry run (show what would be restored without actually doing it)
    dry_run: false

# Network settings
network:
  # Connection settings
  connection_timeout: 30000  # milliseconds
  read_timeout: 300000       # milliseconds
  write_timeout: 300000      # milliseconds
  
  # Retry settings
  retry:
    enabled: true
    max_attempts: 3
    backoff_strategy: "exponential"  # Options: linear, exponential
    initial_delay: 1000  # milliseconds
    max_delay: 30000     # milliseconds
  
  # Bandwidth limiting
  bandwidth_limit:
    enabled: false
    upload_limit_mbps: 0   # 0 = no limit
    download_limit_mbps: 0 # 0 = no limit
  
  # TCP settings
  tcp:
    keep_alive: true
    keep_alive_time: 300    # seconds
    keep_alive_interval: 60 # seconds
    keep_alive_count: 3
    no_delay: true
    buffer_size: 131072     # bytes
    reuse_address: true
  
  # QUIC settings
  quic:
    idle_timeout: 300000    # milliseconds
    max_idle_timeout: 900000 # milliseconds
    initial_max_data: 10485760  # bytes
    initial_max_stream_data_bidi_local: 1048576  # bytes
    initial_max_stream_data_bidi_remote: 1048576 # bytes
    initial_max_streams_bidi: 100

# Performance settings
performance:
  # Thread pool settings
  thread_pool:
    core_size: 4
    max_size: 16
    queue_capacity: 1000
  
  # I/O settings
  io:
    buffer_size: 65536  # bytes
    direct_buffers: true
  
  # Memory settings
  memory:
    max_heap_size: "1G"
    cache_size: "256M"
    
  # Parallel processing
  parallel:
    enabled: true
    max_concurrent_operations: 4
    chunk_processing_threads: 2

# Logging settings
logging:
  level: "INFO"  # Options: TRACE, DEBUG, INFO, WARN, ERROR
  console:
    enabled: true
    format: "simple"  # Options: simple, detailed, json
  file:
    enabled: false
    path: "./logs/justsyncit-client.log"
    max_size: "100MB"
    max_history: 10
    format: "detailed"

# Security settings
security:
  # Encryption settings
  encryption:
    enabled: false
    algorithm: "AES-256-GCM"
    key_derivation: "PBKDF2"
    key_iterations: 100000
    
  # Certificate settings
  certificates:
    trust_store: ""
    trust_store_password: ""
    key_store: ""
    key_store_password: ""
    verify_hostname: true
    verify_certificate: true

# Profile configurations
profiles:
  # Development profile
  development:
    client:
      default_server:
        host: "dev-server.local"
        port: 8080
        ssl_enabled: false
      backup:
        verify_integrity: true
        compression:
          level: 3
    logging:
      level: "DEBUG"
      console:
        enabled: true
      file:
        enabled: true
        path: "./logs/dev-client.log"
    performance:
      memory:
        max_heap_size: "512M"
        cache_size: "128M"
  
  # Production profile
  production:
    client:
      default_server:
        host: "backup.company.com"
        port: 443
        ssl_enabled: true
        ssl_verify: true
      backup:
        verify_integrity: true
        compression:
          level: 9
    logging:
      level: "INFO"
      console:
        enabled: false
      file:
        enabled: true
        path: "/var/log/justsyncit/client.log"
    security:
      encryption:
        enabled: true
    performance:
      memory:
        max_heap_size: "2G"
        cache_size: "512M"
  
  # Remote profile (for slow connections)
  remote:
    client:
      default_server:
        transport: "quic"
      backup:
        compression:
          level: 9
          threshold: 512
    network:
      connection_timeout: 60000
      read_timeout: 600000
      write_timeout: 600000
      retry:
        max_attempts: 5
        max_delay: 60000
      bandwidth_limit:
        enabled: true
        upload_limit_mbps: 10
        download_limit_mbps: 10
    performance:
      parallel:
        enabled: false
        max_concurrent_operations: 1

# Preset configurations for common use cases
presets:
  # Quick backup (fast, less compression)
  quick_backup:
    backup:
      chunk_size: 2097152  # 2MB
      compression:
        level: 3
      verify_integrity: false
    performance:
      parallel:
        enabled: true
        max_concurrent_operations: 8
  
  # Archive backup (maximum compression, verification)
  archive_backup:
    backup:
      chunk_size: 524288  # 512KB
      compression:
        level: 9
      verify_integrity: true
    security:
      encryption:
        enabled: true
    performance:
      parallel:
        enabled: false
        max_concurrent_operations: 1
  
  # Development backup (verbose logging, no compression)
  development_backup:
    backup:
      compression:
        enabled: false
      verify_integrity: true
    logging:
      level: "DEBUG"
      console:
        enabled: true
        format: "detailed"